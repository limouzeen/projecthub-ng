@if (open) {
  <!-- Backdrop เบลอทั้งหน้า -->
  <div class="ph-imgdlg-backdrop" (click)="cancel.emit()">
    <div class="ph-imgdlg-wrap" (click)="$event.stopPropagation()">
      <div class="ph-imgdlg-card" [class.ph-imgdlg-danger]="mode === 'delete'">
        <h2 class="ph-imgdlg-title">
          {{ mode === 'delete' ? 'Remove image' : 'Image URL' }}
        </h2>

        <p class="ph-imgdlg-sub">
          @if (mode === 'delete') {
            ต้องการลบรูปภาพนี้ออกจาก cell ใช่หรือไม่? ข้อมูลอื่นในแถวจะไม่ถูกลบ
          } @else {
            วางลิงก์รูปภาพ (HTTPS) เพื่อแสดงใน cell นี้
          }
        </p>

        @if (mode === 'url') {
          <div class="ph-imgdlg-input-wrap">
            <input
              class="ph-imgdlg-input"
              [value]="url"
              (input)="onUrlChange($event)"
              placeholder="https://example.com/image.png" />
          </div>
        }

        <div class="ph-imgdlg-actions">
          <button class="ph-btn ph-btn-ghost" (click)="cancel.emit()">Cancel</button>

          @if (mode === 'delete') {
            <button class="ph-btn ph-btn-danger" (click)="confirmDelete.emit()">
              Remove
            </button>
          } @else {
            <button
              class="ph-btn ph-btn-primary"
              [disabled]="!safeUrl"
              (click)="saveUrl.emit(safeUrl!)">
              Save
            </button>
          }
        </div>
      </div>
    </div>
  </div>
}
